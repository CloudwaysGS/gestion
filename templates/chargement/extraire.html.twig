{% extends 'accueil.html.twig' %}

{% block title %}Chargement{% endblock %}

{% block body %}
    {% for message in app.session.flashBag.get('success') %}
        <div id="flash-message" class="alert alert-success">{{ message }}</div>
    {% endfor %}
    {% for message in app.session.flashBag.get('danger') %}
        <div id="flash-message" class="alert alert-danger">{{ message }}</div>
    {% endfor %}
    <button title="pdf" href="{{ path('charge_export') }}" class="btn btn-primary ml-5">Exporter en pdf</button>
    <div class="container col-md-13">
    <div class="card ">
        <div class="card-header">Facture</div>
        <div class="card-body">
            <div class="table-responsive" >
                <table id="facture_liste" class="table table-striped table-hover">
                    <tr>
                        <th>Quantite acheté</th>
                        <th>Produit</th>
                        <th>PrixUnit</th>
                        <th>Montant</th>
                    </tr>
                    {% set total = 0 %}
                    {% for f in f %}
                        <tr>
                            <td>{{ f.quantite }}</td>
                            <td>{% if f.produit.count() > 0 %}
                                    {{ f.produit[0].libelle }}
                                {% endif %}
                            </td>
                            <td>
                                {% if f.produit.count() > 0 %}
                                    {{ f.prixUnit|number_format(0, ',', ' ') }}
                                {% endif %}
                            </td>
                            <td>{{ f.montant | number_format(0, ',', ' ') }}</td>
                            {#<td>
                                <a title="Modifier" href="{{ path('modifier',{'id':f.id}) }}"><i class="fa fa-edit"></i></a>
                                <a title="supprimer" href="{{ path('facture_delete', {'id':f.id}) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce produit ?');"><i style="color: red" class="fa fa-trash" aria-hidden="true"></i></a>
                            </td>#}
                        </tr>
                        {% set total = total + f.montant %}
                    {% endfor %}
                    <td>Total</td>
                    <td></td>
                    <td></td>
                    <td>{{ total|number_format(0, ',', ' ') }} f </td>
                </table>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascripts %}
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <script>
        setTimeout(function() {
            var flashMessage = document.getElementById('flash-message');
            if (flashMessage !== null) {
                flashMessage.remove();
            }
        }, 10000);
    </script>



{% endblock %}
